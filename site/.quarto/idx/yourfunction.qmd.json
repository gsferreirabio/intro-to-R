{"title":"Writing your functions","markdown":{"yaml":{"title":"Writing your functions"},"headingText":"because this is not an integer, we will round it upwards","containsRefs":false,"markdown":"\n\nMaybe you want to automatize a process for which you cannot find an already written function, or maybe you want to customize a function to your needs. R enables you to write your own functions using  `function()` and defining the set of steps that will be performed by this function. Of course, they can be stored in objects, which will then be treated as the names of your functions.\n\nLet's create a function to calculate the median of a distribution. The **median** is a value that separates the distribution in half. In a distribution with an odd number of elements, the element in the center of this distribution (when sorted from minimum to maximum or the opposite) is the median.\n```{r}\nodd.dist <- c(1, 3, 5, 7, 9)\nlength(odd.dist)/2\nodd.dist[ceiling(length(odd.dist)/2)]\n```\n\nThis becomes a bit more difficult when the distribution has an even number of elements, because there is no single position at the middle. What is done then is to calculate the average between the values in the two positions before and after the center of the distribution.\n```{r}\neven.dist <- c(2, 4, 6, 8)\nmedian(even.dist)  \n```\n\nFive is not a number in the even.dist, but is the mean between 4 and 6.\nThus, a function to calculate the mean will require four steps:\n1. order the sequence\n2. check whether the sequence is even or odd\n3a. if it is odd, select the number in the center position\n3b. if it is even, calculate the mean between the numbers before and after the center position\n\nIt is always useful to check if each step in your code successfully runs by itself. Let's do this:\n```{r}\n# Step 1: Order the sequence\nnew.seq <- c(1, 5, 3, 9, 7, 11)\nsort(new.seq)\n\n# Step 2: Odd or even?\nlength(even.dist)%%2 == 0  ## dividing even.dist by 2 leaves nothing\nlength(odd.dist)%%2 == 0\n\n# Step 3a: if odd, select the number in the center position\nodd.dist[length(odd.dist)/2]\n\n# Step 3b: if even, calculate the mean between the numbers before \n## and after the center position\nbef <- even.dist[length(even.dist)/2]\naft <- even.dist[1 + length(even.dist)/2]\n(bef + aft)/2\n\n```\n\nNow we can put all those steps together in a single function and use it to calculate the median of the `new.seq` and the `even.dist` objects.\n```{r}\ncalculate.median <- \n  function(x) {\n    odd.even <- length(x)%%2\n    ## we are going to use if/else statements\n    if (odd.even == 0) {  \n      (sort(x)[length(x)/2] + sort(x)[1 + length(x)/2])/2\n    }\n    else sort(x)[ceiling(length(x)/2)]\n  }\n\ncalculate.median(new.seq)\ncalculate.median(even.dist)\n\n```\n\nFinally, you might want to save this function so that you can load it in another script, without the need to rewriting it all over. To `save()` and `load()` a function (or any object, actually), use:\n```{r, eval = FALSE}\nsave(calculate.median, file = \"calculate.median.R\")\n\n# and to load it in another session\nload(file = \"calculate.median.R\")\n```\n\n\n","srcMarkdownNoYaml":"\n\nMaybe you want to automatize a process for which you cannot find an already written function, or maybe you want to customize a function to your needs. R enables you to write your own functions using  `function()` and defining the set of steps that will be performed by this function. Of course, they can be stored in objects, which will then be treated as the names of your functions.\n\nLet's create a function to calculate the median of a distribution. The **median** is a value that separates the distribution in half. In a distribution with an odd number of elements, the element in the center of this distribution (when sorted from minimum to maximum or the opposite) is the median.\n```{r}\nodd.dist <- c(1, 3, 5, 7, 9)\nlength(odd.dist)/2\n# because this is not an integer, we will round it upwards\nodd.dist[ceiling(length(odd.dist)/2)]\n```\n\nThis becomes a bit more difficult when the distribution has an even number of elements, because there is no single position at the middle. What is done then is to calculate the average between the values in the two positions before and after the center of the distribution.\n```{r}\neven.dist <- c(2, 4, 6, 8)\nmedian(even.dist)  \n```\n\nFive is not a number in the even.dist, but is the mean between 4 and 6.\nThus, a function to calculate the mean will require four steps:\n1. order the sequence\n2. check whether the sequence is even or odd\n3a. if it is odd, select the number in the center position\n3b. if it is even, calculate the mean between the numbers before and after the center position\n\nIt is always useful to check if each step in your code successfully runs by itself. Let's do this:\n```{r}\n# Step 1: Order the sequence\nnew.seq <- c(1, 5, 3, 9, 7, 11)\nsort(new.seq)\n\n# Step 2: Odd or even?\nlength(even.dist)%%2 == 0  ## dividing even.dist by 2 leaves nothing\nlength(odd.dist)%%2 == 0\n\n# Step 3a: if odd, select the number in the center position\nodd.dist[length(odd.dist)/2]\n\n# Step 3b: if even, calculate the mean between the numbers before \n## and after the center position\nbef <- even.dist[length(even.dist)/2]\naft <- even.dist[1 + length(even.dist)/2]\n(bef + aft)/2\n\n```\n\nNow we can put all those steps together in a single function and use it to calculate the median of the `new.seq` and the `even.dist` objects.\n```{r}\ncalculate.median <- \n  function(x) {\n    odd.even <- length(x)%%2\n    ## we are going to use if/else statements\n    if (odd.even == 0) {  \n      (sort(x)[length(x)/2] + sort(x)[1 + length(x)/2])/2\n    }\n    else sort(x)[ceiling(length(x)/2)]\n  }\n\ncalculate.median(new.seq)\ncalculate.median(even.dist)\n\n```\n\nFinally, you might want to save this function so that you can load it in another script, without the need to rewriting it all over. To `save()` and `load()` a function (or any object, actually), use:\n```{r, eval = FALSE}\nsave(calculate.median, file = \"calculate.median.R\")\n\n# and to load it in another session\nload(file = \"calculate.median.R\")\n```\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"yourfunction.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","editor":"visual","theme":"cosmo","title":"Writing your functions"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}